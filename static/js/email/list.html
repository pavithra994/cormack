<!--
  ~ Copyright (C) 2019 Ocom Software- All Rights Reserved
  ~ Unauthorized copying of this file, via any medium is strictly prohibited
  ~ Proprietary and confidential
  ~ Written by Ocom Software <licence@ocom.com.au, 2019
  ~
  -->

<div class="content padding-top-20px" ng-if="accessible('email', 'email.list')">
    <div class="page-header">
        <h1 class="capitalize">Mail Messages</h1>
    </div>
    <button type="button" class="btn btn-primary margin-bottom-10px" ng-click="getNewMails()"
            ng-if="accessible('email', 'email.fetch')" ng-disabled="!listLoaded">
        <i class="glyphicon glyphicon-refresh"></i> Refresh
    </button>
    <div ocom-table data-hide-new-button="true">
        <table class="table table-striped table-bordered table-hover list">
            <thead>
            <tr>
                <th sortable="subject" ng-model="listOptions" changed="refreshList()">Subject</th>
                <th sortable="from_header" ng-model="listOptions" changed="refreshList()">From</th>
                <th sortable="processed" ng-model="listOptions" changed="refreshList()">Date Retrieved</th>
                <th ng-model="listOptions" changed="refreshList()">Attachment Count</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in list">
                <td><a href="" ui-sref="email.assign({id: {{ item.id }} })">{{ item.subject  }}</a></td>
                <td><a href="mailto:{{ item.from_email }}" target="_blank">{{ item.from_email }}</a></td>
                <td>{{ item.fetched | date: 'dd/MM/yyyy'}}</td>
                <td>{{ item.attachments.length }}</td>
            </tr>
            <tbody>
        </table>
    </div>
</div>
